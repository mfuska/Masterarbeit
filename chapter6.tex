%----------------------------------------------------------------
%
%  File    :  chapter6.tex
%
%  Authors : Michael Fuska, FH Campus Wien, Austria
%  Created : 13 Feb 2016
%
%  Changed :  
% 
%----------------------------------------------------------------


\chapter{Analyse und Ergebnisse}
\label{ch:Ergebnisse}

%------------------------------------------------------------------------------
%------------------------------ Analysen zur Frage 1

\section{Welche Faktoren sind für die Sicherheit und die Vertrauenswürdigkeit eines iOS Device ausschlaggebend}
\label{sec:Frage1}

\begin{table}[htp!]
    \begin{center}
        \begin{tabular}{|p{30mm}|p{27mm}|p{12mm}|p{10mm}|p{18mm}|p{2cm}|p{15mm}|} \hline
            \textbf{iOS Device} & \textbf{Verkaufsstart} & \textbf{initial iOS} & \textbf{last iOS} & \textbf{Secure Enclave} & \textbf{Prozessor}  & \textbf{\#Tage JB} \\ \hline
            \textbf{iPhone} & 29.06.2007  & 1.0 & 3.1.3 & nA & Samsung SSL8900 & 11\\ \hline
            \textbf{iPhone 3G} & 11.07.2008 & 2.0 & 4.2.1 & nA & Samsung SSL8900 & 9\\ \hline
            \textbf{iPhone 3GS} & 19.06.2009 & 3.0 & 6.1.6 & nA & Samsung SSL8920 & 14\\ \hline
            \textbf{iPhone 4} & 01.08.2010 & 4.0 & 7.1.2 & nA & Apple A4 & 38 \\ \hline
            \textbf{iPhone 4s} & 20.01.2012 & 5.0 & 9.3.2 & nA & Apple A5 & 98 \\ \hline 
            \textbf{iPhone 5} & 21.09.2012 & 6.0 &  9.3.2 & nA & Apple A6 & 136 \\ \hline
            \textbf{iPhone 5c} & 22.12.2013 & 7.0 & 9.3.2 & nA & Apple A6 & 93 \\ \hline
            \textbf{iPhone 5s} & 22.12.2013 & 7.0 & 9.3.2 & A & Apple A7 & 93 \\ \hline
            \textbf{iPhone 6} & 19.09.2014 & 8.0 & 9.3.2 & A & Apple A8 & 33\\ \hline
            \textbf{iPhone 6 Plus} & 19.09.2014 & 8.0 & 9.3.2 &  A & Apple A8 & 33\\ \hline
            \textbf{iPhone 6s} & 25.09.2016 & 9.0 &  9.3.2 & A & Apple A9 & 19\\ \hline
            \textbf{iPhone 6s Plus} & 25.09.2016 & 9.0 & 9.3.2 &  A & Apple A9 & 19\\ \hline
            \textbf{iPhone SE} & 31.03.2016 & 9.0 &  9.3.2 & A & Apple A9 & nA\\ \hline          \end{tabular} 
        \caption{Auflistung iOS Device/ Verkaufsstart/ initiale iOS/ last supported iOS / Prozessor/ \#Tage bis zum JB}
        \label{tab:iOSHW}
    \end{center}
\end{table}

In der Tabelle \ref{tab:iOSHW} werden alle iOS Devices aufgelistet und  in Abhängigkeit vom Verkaufszeitpunkt des Device, der initial installierten iOS Version und des Prozessor-Typs des iDevice gebracht. Weiters wird in der Tabelle angeführt, ob dieses Device einen Koprozessor mit Secure Enclave implementiert hat und wie lange die JB Community benötigte, um ein JB für dieses Device zu veröffentlichen. Diese Tabelle beinhaltet alle Daten die als Grundlage für alle weiteren Analysen in diesem Kapitel dienen.\par

%------------------------------------------------------------------------------
%------------------------------ 
\subsection{Secure Enclave}
\label{sec:Frage1SecureEnclave}
 
 Die Secure Enclave des Koprozessor des Apple A7 Prozessors und alle neueren Prozessoren (siehe Tabelle: \ref{tab:iOSHW}) bringen einen massiven Sicherheitsgewinn für die iOS Produkte mit sich. Unter iOS gibt es die Möglichkeit verschiedene Passcode Konfigurationen vorzunehmen. Neben der Anzahl der Stellen, kann auch konfiguriert werden, ob nur Zahlen oder auch alphanumerische Werte für den Passcode verwendet werden können.\par 
 Ein weiterer iOS Konfigurationsparameter ermöglicht es, das Device so zu konfigurieren, dass nach zehn falschen Passcode Eingabe alle Daten des Gerätes gelöscht werden. Die Anzahl der Fehlversuche wird bei iOS Devices ohne Secure Enclave in den Flash Memory geschrieben. \par
 Im Fall \textit{\glqq FBI gegen Apple\grqq{}} gibt es verschiedensten Theorien darüber, wie das iPhone 5c des Attentäters entsperrt wurde. Die Abbildung: \ref{fig:iOSSecurityArchitekturiOS7} zeigt die iOS Sicherheitsarchitektur des iPhone 5c. Der Coprozessor mit Secure Enclave ist nicht Teil dieser Architektur. 

\begin{figure}[htb]
    \begin{minipage}{0.6\textwidth} 
 \begin{description}
        \item[\parbox{\textwidth} {Der Sicherheitsforscher Zdziarski beschreibt in seinen Abhandlungen die plausiblen Varianten des FBI Hacks wie folgt}]~\par
        \begin{enumerate}
            \item \textit{\glqq .... based on all of this, is that an external forensics company, with hardware capabilities, is likely copying the NAND storage off the chip and frequently re-copying all or part of the chip’s contents back to the device in order to brute force the pin – and may or may not also be using older gear from iOS 8 techniques to do it. The two weeks the FBI has asked for are not to develop this technique (it’s most likely already been developed, if FBI is willing to vacate a hearing over it), but rather to demonstrate, and possibly sell, the technique to FBI by means of a field test on some demo units.\grqq{}} \cite{Hacking[4]}
            \item \textit{\glqq If the FBI did in fact use a software exploit, the question then becomes one of how viable it is on other platforms.\grqq{}} \cite{Hacking[4]}
        \end{enumerate}
    \end{description}     
    \end{minipage}
	\hfil
	\begin{minipage}{0.4\textwidth}
		\includegraphics[width=0.9\textwidth]{Bilder/SecArchitektur-iOS7.png}
		\caption {iOS Security Architektur iPhone 5c (\cite{Apple[9]} S.3)}
        \label{fig:iOSSecurityArchitekturiOS7}
	\end{minipage}
\end{figure}

\newpage
\paragraph{Ergebnisse:} Die Secure Enclave biete einen Sicherheitsgewinn für die iOS Produkte, aber der Fall \textit{\glqq FBI via Apple\grqq{}} lässt einige Fragen offen. Da das FBI, Apple die Sicherheitslücke nicht offenlegte gibt es nur Mutmaßungen über den Hack der verwendet wurde um das iPhone des Attentäters zu entsperren. \par 
Zdziarski meint dazu: \textit{\glqq The moral of the story is that the exploit the FBI may have is dangerous in and of itself, regardless of whether it serves their specific purposes of brute forcing a device’s pin. Such an exploit has numerous uses within the intelligence community and poses a threat to not only the hundreds of millions of older devices out there, but if it can be ported to a 64-bit platform, every single one of us – either directly as a threat from the government, a nation state the exploit developer also sold it to, or another hacker who finds the same hole because FBI didn’t report the vulnerability to Apple. FBI has left us all potentially exposed by choosing to keep their technique secret.\grqq{}} \cite{Hacking[4]} \par 
Vor allem gibt es Vermutungen, dass der Hack des FBIs eine Möglichkeit bietet die Secure Enclave zu umgehen.

%------------------------------------------------------------------------------
%------------------------------ 
\subsection{iOS Device}
\label{sec:Frage1iOSDevice} 

Die Tabelle \ref{tab:iOSHW} alleine gibt noch keinen Aufschluss über den Zusammenhang zwischen der Sicherheit des Systems und der verwendeten iOS Hardware. Da die Tabelle \ref{tab:iOSHW} keine Aussagen darüber zulässt, ob der Zeitraum bis zum Veröffentlichen des JB nur von der HW abhängt oder von der iOS Version die am Device installiert wurde, müssen die Daten der beiden Tabellen (Tabelle: \ref{tab:iOSHW}, Tabelle: \ref{tab:iOSVersion}) korreliert werden. \par 
Die Abbildung \ref{fig:VergleichJBProzessorSW} stellt die Prozessoren des iDevices mit der installierten iOS Version und die benötigten Tage für die Veröffentlichung eines JB in Verbindung. \par


\begin{table}[htp!]
    \begin{center}
        \begin{tabular}{|l|l|l|} \hline
         \textbf{iOS Version} & \textbf{Veröffentilicht} & \textbf{\#Tage JB}\\ \hline            1.0 & 29.06.2007 & 11\\ \hline         2.0 & 11.07.2008	& 9\\ \hline         3.0 & 17.06.2009	& 2\\ \hline         4.0 & 21.06.2010 & 2\\ \hline         5.0 & 12.10.2011	& 1\\ \hline         6.0 & 19.09.2012	& 0\\ \hline         7.0 & 18.09.2013	& 95\\ \hline         7.1-7.1.2 & 29.05.2014 & 25\\ \hline         8.0 & 17.09.2014	& 35\\ \hline         8.1.1-8.4 & 17.11.2014	& 12\\ \hline         9.0 & 16.09.2015	& 28\\ \hline
       %  9.0.1 & 23.09.2015 & nA \\ \hline
       %  9.0.2 & 30.09.2015 & nA \\ \hline         9.1 & 21.10.2015	& 142\\ \hline 
       %  9.2 & 08.12,2015 & nA\\ \hline
       % 9.2.1 & 18.02.2016 & nA \\ \hline
       %  9.3 & 21.03,016 & nA\\ \hline 
       % 9.3.1 & 31.03.2016 & nA\\ \hline
       % 9.3.2 & 17.05.2016 & nA \\ \hline
        \end{tabular} 
        \caption{Auflistung iOS Version/ Veröffentlichungsdatum/ \# Tage bis zum JB}
        \label{tab:iOSVersion}
    \end{center}
\end{table}

Die Tabelle \ref{tab:iOSVersion} listet die iOS Version, das Veröffentlichungsdatum dieser iOS Version und die Anzahl an Tagen die benötigt wurden, um einen JB für diese iOS Version zu veröffentlichen auf.   
\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.55]{Bilder/iDeviceJB-SW-HW.png}
         \caption{Vergleich der Anzahl der Tage eines JB für die Prozessoren und für der initialen iOS Version}
        \label{fig:VergleichJBProzessorSW}      
\end{figure}

Anhand der Abbildung \ref{fig:VergleichJBProzessorSW} kann gezeigt werden, dass alle Apple Prozessorarchitekturen einschliesslich der Apple A6 einen Sicherheitsgewinn für die iOS Produkte bedeutet haben. Da die JBs für diese iOS Version auf älteren Apple Prozessorarchitekturen innerhalb von wenigen Tagen verfügbar war. Ab der Apple Prozessorarchitektur A7 ist der Unterschied, zwischen dem veröffentlichen des JBs für die HW und die SW, nur mehr marginal. \par
\paragraph{Ergebnisse:} Dies lässt den Schluss zu, dass die Sicherheit und die Vertrauenswürdigkeit der iOS Produkte zum heutigen Zeitpunkt nur mehr vom mobilen Betriebssystem von Apple abhängt und nicht von der verwendeten iOS HW.

\newpage
%------------------------------------------------------------------------------
%------------------------------ 
\subsection{iOS Version}
\label{sec:Frage1iOSVersion} 

\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.41]{Bilder/Frage1_1.png}
        \caption{iOS Version / JB Tools /\# Tage bis zum JB}
        \label{fig:AnalyseiOSJB1}        
\end{figure}

\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.43]{Bilder/Frage1_2.png}
        \caption{iOS Version / JB Tools /\# Tage bis zum JB}
        \label{fig:AnalyseiOSJB2}
\end{figure}

Die Abbildungen \ref{fig:AnalyseiOSJB1} und \ref{fig:AnalyseiOSJB2} zeigen die bekanntesten und stabilsten untethered JBs in Abhängigkeit mit der iOS Version und der Anzahl an Tagen die benötigt wurden um für diese iOS Version ein Jailbreak durchzuführen \par 
\textbf{Die Graphiken zeigen,} dass nach einem gelungen JB die Sicherheitsupdates von Apple einen kurzzeitigen Sicherheitsmehrwert mit sich bringen, aber innerhalb einiger Tage wurde ein neuer JB des selben JB-Team veröffentlicht. Dies lässt darauf schliessen, dass die Sicherheitslücken nur teilweise geschlossen worden sind. Dieser Verhalten gilt vor allem für alle iOS Versionen bis einschliesslich der iOS Version 7.x.\par  
Ab der iOS Version 8.x ändert sich dieses Verhalten, da die JB Community jetzt länger für die JBs der nachfolgenden iOS minor Releases benötigt. \par 
Markant ändern sich die Muster ab der iOS Version 9.x. Das JB für die Minor iOS Version 9.1 benötigte fast sechs länger, als das JB für die Major iOS Version 9.0 benötigte.\par

\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.5]{Bilder/iOSJB1.png}
        \caption{Anzahl der veröffentlichten JBs pro iOS Version 3.x - 5.1.1}
        \label{fig:AnalyseAnzahliOSJB1}
\end{figure}

\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.5]{Bilder/iOSJB2.png}
        \caption{Anzahl der veröffentlichten JBs pro iOS Version 6.x - 9.x.x}
        \label{fig:AnalyseAnzahliOSJB2}
\end{figure}

\textbf{Die Abbildungen \ref{fig:AnalyseAnzahliOSJB1} und \ref{fig:AnalyseAnzahliOSJB2} zeigen,} dass die Anzahl der veröffentlichten JB-Tools, ab der iOS Version 7.0 massiv rückgängig sind. Es wurden nur mehr ein oder zwei JB-Tools pro iOS Version der Öffentlichkeit zur Verfügung gestellt. 
\paragraph{Ergebnisse:} Die aufbereitet Daten lassen den Schluss zu, dass die Sicherheit und die Vertrauenswürdigkeit der iOS Produkte mit steigender iOS Version zunimmt. Weiters muss angeführte werden, dass Apple seine Strategie im Bezug auf die JB Community geändert hat. In der Vergangenheit hat Apple versucht dagegen gerichtlich vorzugehen, nur mit begrenzten Erfolg (\textit{\glqq Fall Apple gegen Gehot\grqq{}}). Vor einigen Jahren hat Apple damit begonnen namhafte iOS Hacker anzustellen,  wie z.B. Comex (\textit{\glqq Entwickler von JailbreakMe\grqq}). Für Apple hat dies zwei Vorteile, ersten sie erhalten das Wissen der Person bezüglich der Schwachstellen der iOS Produkte und zweitens die JB Community verliert ein Mitglied. Aber was noch viel schwerwiegender einzustufen ist, dass mit dem Hacker auch eine Anzahl von Zero-Day Bugs Apple gemeldet werden.\par
Seit dem Jahr 2015 ist der kommerzielle Aspekt in diesem Zusammenhang nicht ausser acht zu lassen. Angefangen mit dem Preisgeld auf ein JB der iOS Version 9.x bis hin zu Premieren für Zero-Day Bugs. Dies hat meiner Meinung nach einen grossen Einfluss auf die Dauer der Veröffentlichung des JB ab der iOS Version 9.x und verzerrt die erhobenen Metriken.

%------------------------------------------------------------------------------
%------------------------------ 
\section{Welche Auswirkung haben die von Apple eingeführten Sicherheitsmechanismen und Sicherheitsupdates auf die Sicherheit des Systems?}
\label{sec:Frage2}
%------------------------------------------------------------------------------
%------------------------------ 
\subsection{iOS Sicherheitsmechanismen}
\label{sec:Frage2SecMechanismen}

%------------------------------------------------------------------------------
%------------------------------ 
\subsection{iOS Sicherheitsupdates}
\label{sec:Frage2SecUpdate}
\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.4]{Bilder/iOSSicherheitsupdate3.png}
        \caption{Anzahl Bugs iOS-Sicherheitsupdate iOS Version 3.x - 4.x}
        \label{fig:AnalyseiOSSicherheitsupdate3}
\end{figure}
     
\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.55]{Bilder/iOSSicherheitsupdate5.png}
        \caption{Anzahl Bugs iOS-Sicherheitsupdate iOS Version 5.x - 6.x}
        \label{fig:AnalyseiOSSicherheitsupdate5}
\end{figure}

\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.7]{Bilder/iOSSicherheitsupdate7.png}
        \caption{Anzahl Bugs iOS-Sicherheitsupdate iOS Version 7.x}
        \label{fig:AnalyseiOSSicherheitsupdate7}
\end{figure}

\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.6]{Bilder/iOSSicherheitsupdate8.png}
        \caption{Anzahl Bugs iOS-Sicherheitsupdate iOS Version 8.x}
        \label{fig:AnalyseiOSSicherheitsupdate8}
\end{figure}

\begin{figure}[htbp]
        \centering
                \includegraphics[scale=0.55]{Bilder/iOSSicherheitsupdate9.png}
        \caption{Anzahl Bugs iOS-Sicherheitsupdate iOS Version 9.x}
        \label{fig:AnalyseiOSSicherheitsupdate9}
\end{figure}

\newpage
%------------------------------------------------------------------------------
%------------------------------ 
\section{Analyse der Hypothese H1}
\label{sec:AnalyseHypo}




 